<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/WEB-INF/InicioTemplate.xhtml"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui">

    <ui:define name="title">Laboratorio UTEQ - Inicio</ui:define>
    <ui:define name="content">
        <f:event type="preRenderView" listener="#{equipoMB.listar()}" />
        <f:event type="preRenderView" listener="#{categoriaEquipoMB.listar()}" />
        <f:event type="preRenderView" listener="#{categoriaEquipoMB.listarAreasAulas()}" />
        <div class="barra-navegacion">

            <p:growl id="msj"  showDetail="true" />

<!--            REGISTRAR-->
            <h:form id="registro">
                <div class="card" style="margin-top: 5px;">
                        <p:toolbarGroup>
                            <!-- Boton Agregar nuevo Equipo -->
                            <p:commandButton
                                    value=" Agregar Equipo"
                                    styleClass="ui-button-primary"
                                    icon="pi pi-plus"
                                    style="margin-right: 6px;"
                                    process="@this"
                                    oncomplete="PF('agregarEquipo').show()">
                            </p:commandButton>
                        </p:toolbarGroup>
                </div>
                <!-- Dialogo Agregar Nuevo Equipo  -->
                <p:dialog header="Agregar Equipo"
                          showEffect="fade"
                          modal="true"
                          widgetVar="agregarEquipo"
                          responsive="true"
                          width="55%"
                          draggable="false"
                          height="350">
                    <p:outputPanel
                            id="manage-equipo-form"
                            class="ui-fluid">
                        <div class="p-formgrid p-grid">

                            <!--                                    CODIG DEL BIEN-->
                            <div class="p-field p-col-12 p-md-4">
                                <p:outputLabel value="Codigo" for="@next"/>
                                <p:inputText
                                        id="codEquipo"
                                        value="#{equipoMB.equipo.codigo}"
                                        placeholder="código del bien"
                                        required="true"
                                >
                                </p:inputText>
                            </div>

<!--                                                                TIPO DE ACTIVO-->
                            <div class="p-field p-col-12 p-md-4">
                                <p:outputLabel value="Tipo de activo" for="@next"/>
                                <p:selectOneMenu value="#{equipoMB.equipo.idCategoriaEquipo}"
                                >
                                    <f:selectItem  noSelectionOption="true" itemLabel="Seleccione" itemValue="#{null}" />
                                    <f:selectItems
                                            value="#{categoriaEquipoMB.listaCategoriaEquipos}"
                                            var="ce"
                                            itemLabel="#{ce.nombre}"
                                            itemValue="#{ce.idCategoriaEquipo}"
                                            required="true"
                                    />

                                </p:selectOneMenu>
                            </div>

                            <!--                                    DESCRIPCIÓN-->
                            <div class="p-field p-col-12 p-md-4">
                                <p:outputLabel value="Descripción" for="@next"/>
                                <p:inputTextarea
                                        rows="1"
                                        cols="33"
                                        value="#{equipoMB.equipo.descripcion}"
                                        required="true"
                                />
                            </div>

                            <!--                                        MARCA-->
                            <div class="p-field p-col-12 p-md-4">
                                <p:outputLabel value="Marca" for="@next"/>
                                <p:inputText
                                        maxlength="50"
                                        value="#{equipoMB.equipo.marca}"
                                >
                                </p:inputText>
                            </div>

                            <!--                                    MODELO-->
                            <div class="p-field p-col-12 p-md-4">
                                <p:outputLabel value="Modelo" for="@next"/>
                                <p:inputText
                                        maxlength="50"
                                        value="#{equipoMB.equipo.modelo}"
                                >
                                </p:inputText>
                            </div>

                            <!--                                    NÚMERO DE SERIE-->
                            <div class="p-field p-col-12 p-md-4">
                                <p:outputLabel value="Número de serie" for="@next"/>
                                <p:inputText
                                        maxlength="25"
                                        value="#{equipoMB.equipo.numeroSerie}"
                                        required="true"
                                >
                                </p:inputText>
                            </div>

                            <!--                                    FECHA ADQUISICIÓN-->
                            <div class="p-field p-col-12 p-md-4">
                                <p:outputLabel value="Fecha de adquisición" for="@next"/>
                                <p:datePicker
                                        showIcon="true"
                                        value="#{equipoMB.equipo.fechaAdquisicion}"
                                        required="true"
                                        monthNavigator="true"
                                        yearNavigator="true"
                                        showWeek="true"
                                />



                            </div>

<!--                            ESTADO-->
                            <div class="p-field p-col-12 p-md-4">
                                <p:outputLabel value="Estado" for="@next"/>
                                <p:selectOneMenu
                                        value="#{equipoMB.equipo.estado}"
                                        required="true"
                                >
                                    <f:selectItem  noSelectionOption="true" itemLabel="Seleccione" itemValue="#{null}" />
                                    <f:selectItem itemValue="BUENO" itemLabel="1. BUENO" />
                                    <f:selectItem itemValue="REGULAR" itemLabel="2. REGULAR" />
                                    <f:selectItem itemValue="DESCOMPUESTO" itemLabel="3. DESCOMPUESTO" />
                                </p:selectOneMenu>

                            </div>


                            <!--                                    LABORATORIO-->
<!--                            <div class="p-field p-col-12 p-md-4">-->
<!--                                <p:outputLabel value="Laboratorio" for="@next"/>-->
<!--                                <p:selectOneMenu id="laboratorio" value="">-->
<!--                                    <f:selectItem itemLabel="Seleccione" itemValue=""/>-->
<!--                                    <f:selectItem itemLabel="Biotecnología" itemValue="Option1"/>-->
<!--                                    <f:selectItem itemLabel="Biología y microbiología" itemValue="Option2"/>-->
<!--                                    <f:selectItem itemLabel="Bromatología" itemValue="Option3"/>-->
<!--                                    <f:selectItem itemLabel="Suelos y aguas" itemValue="Option4"/>-->
<!--                                    <f:selectItem itemLabel="Química y bioquímica" itemValue="Option5"/>-->
<!--                                    <f:selectItem itemLabel="Rumiología" itemValue="Option6"/>-->
<!--                                    <f:facet name="footer">-->
<!--                                        <p:divider styleClass="p-mt-0"/>-->
<!--                                        <h:outputText value="3 options" style="font-weight:bold;"/>-->
<!--                                    </f:facet>-->
<!--                                </p:selectOneMenu>-->
<!--                            </div>-->

<!--                                                                AREA-->
                            <div class="p-field p-col-12 p-md-4">
                                <p:outputLabel value="Area" for="@next"/>
                                <p:selectOneMenu
                                        value="#{equipoMB.equipo.idAreaAula}"
                                        required="true"
                                >
                                    <f:selectItem  noSelectionOption="true" itemLabel="Seleccione" itemValue="#{null}" />
                                    <f:selectItems
                                            value="#{categoriaEquipoMB.listaAreasAulas}"
                                            var="au"
                                            itemLabel="#{au.nombre}"
                                            itemValue="#{au.idAreaAula}"
                                    />
                                </p:selectOneMenu>
                            </div>

<!--                            <div class="p-field p-col-12 p-md-12">-->
<!--                                    <p:growl id="messages" showDetail="true"/>-->
<!--                                    <p:outputLabel value="Subir imagen" for="@next"/>-->
<!--                                    <p:fileUpload mode="advanced"-->
<!--                                                  multiple="false"-->
<!--                                                  sizeLimit="102400" allowTypes="/(\.|\/)(gif|jpe?g|png)$/"-->
<!--                                                  invalidSizeMessage="Maximum file size allowed is 100 KB"-->
<!--                                                  invalidFileMessage="only gif | jpg | jpeg | png is allowed"-->
<!--                                                  update="messages cropperPanel"-->
<!--                                                  listener="#{cropUploaderBean.handleFileUpload}"-->
<!--                                    />-->

<!--                                    <p:outputPanel id="cropperPanel">-->

<!--                                        <h:panelGrid columns="1"-->
<!--                                                     rendered="#{not empty cropUploaderBean.originalImageFile}">-->

<!--                                            <p:commandButton value="Crop"-->
<!--                                                             action="#{cropUploaderBean.crop}"-->
<!--                                                             update="cropped messages" styleClass="p-my-3"/>-->

<!--                                            <h:panelGrid columns="2" cellpadding="7">-->

<!--                                                <p:imageCropper-->
<!--                                                        value="#{cropUploaderBean.croppedImage}"-->
<!--                                                        id="imageCropper" cache="false"-->
<!--                                                        image="#{cropUploaderBean.image}"-->
<!--                                                        initialCoords="50,50,150,100"-->
<!--                                                        minSize="50,50" maxSize="350,350"/>-->

<!--                                                <p:outputPanel id="cropped">-->
<!--                                                    <p:graphicImage cache="false"-->
<!--                                                                    rendered="#{not empty cropUploaderBean.croppedImage}"-->
<!--                                                                    value="#{cropUploaderBean.cropped}"/>-->
<!--                                                </p:outputPanel>-->

<!--                                            </h:panelGrid>-->


<!--                                        </h:panelGrid>-->
<!--                                    </p:outputPanel>-->

<!--                            </div>-->


                        </div>


                    </p:outputPanel>
                    <f:facet name="footer">
                        <p:commandButton
                                value="Guardar"
                                icon="pi pi-check"
                                styleClass="ui-button-primary"
                                actionListener="#{equipoMB.registrar()}"
                                update=":msj"
                        >
                        </p:commandButton>
                        <p:commandButton
                                value="Cancelar"
                                icon="pi pi-times"
                                styleClass="ui-button-danger"/>
                    </f:facet>
                </p:dialog>
            </h:form>


            <h:form id="datos">
                <div class="card" style="margin-top: 5px;">

                    <p:toolbar>
                        <p:toolbarGroup>
                            <div class="p-grid p-justify-around">

                                <p:dataTable
                                        id="dataEquipos"
                                        lazy="true"
                                        editable="true"
                                        reflow="true"
                                        editInitEvent="dblclick"
                                        editMode="cell"
                                        value="#{equipoMB.listaEquipos}"
                                        var="equipo"
                                        responsive="true"
                                >

                                    <!--                                    Header DataTable-->
                                    <f:facet name="header">
                                        <div class="p-d-flex p-jc-between p-ai-center">
                                            <span style="font-size: 24px">Equipos de Laboratorios</span>
                                            <span class="filter-container ui-input-icon-left">
                                                <i class="pi pi-search"/>
                                                <p:inputText placeholder="Buscar"/>
                                            </span>
                                        </div>
                                    </f:facet>

                                    <!--                                    Codigo-->
                                    <p:column headerText="Código" filterStyle="display : none">
                                        <p:outputLabel value="#{equipo.codigo}" />
                                    </p:column>
<!--                                    &lt;!&ndash;                                    Tipo activo&ndash;&gt;-->
<!--                                    <p:column headerText="Tipo de activo" filterStyle="display : none">-->
<!--                                        <p:outputLabel value="#{equipo.categoriaEquipo.nombre}" />-->
<!--                                    </p:column>-->

                                    <!--                                    Categoria-->
                                    <p:column headerText="Categoria de equipo" filterStyle="display : none">
                                        <p:outputLabel value="#{equipo.categoriaEquipo}" />
                                    </p:column>
                                                                        Desccripción
                                    <p:column headerText="Descripción" filterStyle="display : none">
                                        <p:outputLabel value="#{equipo.descripcion}" />
                                    </p:column>
                                    <!--                                    Marca-->
                                    <p:column headerText="Marca" filterStyle="display : none">
                                        <p:outputLabel value="#{equipo.marca}" />
                                    </p:column>
                                    <!--                                    Modelo-->
                                    <p:column headerText="Modelo" filterStyle="display : none">
                                        <p:outputLabel value="#{equipo.modelo }" />
                                    </p:column>
                                    <!--                                    Número de seríe-->
                                    <p:column headerText="Número de serie" filterStyle="display : none">
                                        <p:outputLabel value="#{equipo.numeroSerie}" />
                                    </p:column>
                                    <!--                                    Fecha adquisición-->
                                    <p:column headerText="fecha de adquisición" filterStyle="display : none">
                                       <p:outputLabel value="#{equipo.fechaAdquisicion}" />
                                    </p:column>
                                    <!--                                    Área-->
                                    <p:column headerText="Área" filterStyle="display : none">
                                        <p:outputLabel value="#{equipo.areaAula}" />
                                    </p:column>
                                    <!--                                    Imagen-->
                                    <p:column headerText="Imagen" filterStyle="display : none">
                                        <p:graphicImage
                                                url="./resources/images/avatar.png"
                                                style=" width: 100px; height: 100px"
                                        />
                                    </p:column>
                                </p:dataTable>
                            </div>
                        </p:toolbarGroup>
                    </p:toolbar>
                </div>
            </h:form>
        </div>


        <h:outputStylesheet name="home.css" library="css"/>
        <h:outputStylesheet name="main.css" library="css"/>
    </ui:define>


</ui:composition>
