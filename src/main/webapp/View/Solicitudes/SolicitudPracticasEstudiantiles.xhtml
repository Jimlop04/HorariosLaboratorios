<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <h:body>
        <ui:composition template="../../WEB-INF/InicioTemplate.xhtml">
            <ui:define name="content"> 
                <f:event type="preRenderView" listener="#{solicitudesMB.listaAsignatura(loginMB.httpSession.getAttribute('idPersona'))}"/>

                <ui:include src="componentes/SubHeaderSolicitudes.xhtml" />

                <div class="barra-navegacion">
                    <p:growl id="msgs" showDetail="true"/>
                    <div class="card" align="center">
                        <p:toolbarGroup>
                            <h4>Registro de Practicas Estudiantiles</h4>
                        </p:toolbarGroup>
                    </div>
                    <div class="card" style="margin-top: 5px;">
                        <p:toolbarGroup>

                            <h:form id="form-SE">

                                <p:growl id="msgs" showDetail="true"/>  
                                <p:outputPanel 
                                    id="manage-Solicitud-form"
                                    class="ui-fluid">
                                    <div class="p-formgrid p-grid">
                                        <!-- FACULTAD -->
                                        <div class="p-field p-col-12 p-md-2">
                                            <p:outputLabel value="Facultad" for="@next"/>
                                            <p:selectOneMenu id="SelectFacultad"
                                                             value="#{solicitudesMB.idFacultad}">
                                                <f:selectItem noSelectionOption="true"  itemLabel="Seleccione Facultad" 
                                                              itemValue="0"/>

                                                <f:selectItems value="#{laboratorioMB.listafacultades}" 
                                                               var="fa"
                                                               itemLabel="#{fa.nombre_facultad}" 
                                                               itemValue="#{fa.idFacultad}">

                                                </f:selectItems>
                                                <p:ajax event="change"                                                         
                                                        listener="#{solicitudesMB.listarCareraByFacultadId()}" 
                                                        rendered="SelectCarrera" 
                                                        update="SelectCarrera"
                                                        />

                                            </p:selectOneMenu>
                                        </div>
                                        <!-- CARRERA -->
                                        <div class="p-field p-col-12 p-md-2">

                                            <p:outputLabel value="Carrera" for="@next"/>
                                            <p:selectOneMenu  id="SelectCarrera"
                                                              converter="omnifaces.SelectItemsIndexConverter"
                                                              value="#{solicitudesMB.carrera.idCarrera}">

                                                <f:selectItem noSelectionOption="true" itemLabel="Seleccione Carrera" 
                                                              itemValue="0"/>
                                                <f:selectItems value="#{solicitudesMB.listaCarrera}" 
                                                               var="fa"
                                                               itemLabel="#{fa.nombreCarrera}" 
                                                               itemValue="#{fa.idCarrera}"></f:selectItems>

                                            </p:selectOneMenu>

                                        </div>         


                                        <!-- LABORATORIO -->
                                        <div class="p-field p-col-12 p-md-3">
                                            <p:outputLabel for="@next" value="Laboratorio" />
                                            <p:selectOneMenu id="SelectLaboratorio"
                                                             value="#{equipoMB.idLaboratorio}">

                                                <f:selectItem itemLabel="Seleccione Laboratorio" 
                                                              itemValue="0"/>
                                                <f:selectItems value="#{laboratorioMB.listasoloLaboratorios}" 
                                                               var="la"
                                                               itemLabel="#{la.nombre_laboratorio}"                                                             
                                                               itemValue="#{la.idLaboratorio}">
                                                </f:selectItems>

                                                <p:ajax event="change"                                                         
                                                        listener="#{equipoMB.listarEquiposByLaboratorioId()}"
                                                        update="comboEquipos"/>
                                            </p:selectOneMenu>
                                        </div>
                                        <!-- CODIGO LAB -->

                                        <div class="p-field p-col-12 p-md-3">
                                            <p:outputLabel value="Responsable Laboratorio" for="@next"/>
                                            <p:selectOneMenu id="SelectResponsableLabo"
                                                             disabled="#{encargadoMB.encargado.idEncargadoLaboratorio != 0}"
                                                             value="#{encargadoMB.encargado.idEncargadoLaboratorio}">
                                                <p:ajax listener="#{laboratorioMB.onEncargadoLaboratorioChange}" 
                                                        />
                                                <f:selectItem itemLabel="Seleccione Encarcagado" 
                                                              itemValue="0"/>
                                                <f:selectItems value="#{encargadoMB.listaEncargados}" 
                                                               var="el"
                                                               itemLabel="#{el.nombre_persona}" 
                                                               itemValue="#{el.idEncargadoLaboratorio}"></f:selectItems>

                                            </p:selectOneMenu>
                                        </div>
                                        <!-- ASIGNATURA -->
                                        <div class="p-field p-col-12 p-md-3">
                                            <p:outputLabel value="Materia" for="@next"/>
                                            <p:selectOneMenu id="SelectAsignatura"
                                                             value="#{solicitudesMB.asignatura.idAsignatura}">

                                                <f:selectItem itemLabel="Seleccione Asigantura" 
                                                              itemValue="0"/>
                                                <f:selectItems value="#{solicitudesMB.listAsignatura}"
                                                               var="la"
                                                               itemLabel="#{la.nombreAsignatura}"                                                             
                                                               itemValue="#{la.idAsignatura}">

                                                </f:selectItems>
                                            </p:selectOneMenu>
                                        </div>
                                        <div class="p-field p-col-12 p-md-3">
                                            <p:outputLabel value="Docente" for="@next"/>
                                            <p:inputText
                                                value="#{loginMB.httpSession.getAttribute('nombrePersona')}"
                                                ></p:inputText>
                                        </div>
                                        <!-- Periodo Academico -->
                                        <div class="p-field p-col-12 p-md-2">
                                            <p:outputLabel value="Periodo Academico" for="@next"/>
                                            <p:selectOneMenu id="SelectPeriodo"
                                                             value="#{solicitudesMB.periodoAcademico.idPeriodoAcademico}">

                                                <f:selectItem noSelectionOption="true" itemLabel="Seleccione Periodo" 
                                                              itemValue="0"/>
                                                <f:selectItems value="#{solicitudesMB.listaPeriodoAcademico}"
                                                               var="la"
                                                               itemLabel="#{la.periodoAcademico}"                                                             
                                                               itemValue="#{la.idPeriodoAcademico}">

                                                </f:selectItems>
                                                  <p:ajax event="change"                                                         
                                                          listener="#{solicitudesMB.listarCursoByPeriodo()}" 
                                                        rendered="SelectParalelo" 
                                                        update="SelectParalelo"
                                                        />

                                            </p:selectOneMenu>
                                        </div>
                                        <div class="p-field p-col-12 p-md-2">
                                            <p:outputLabel value="Semestre" for="@next"/>
                                            <p:inputText 
                                                maxlength="25"></p:inputText>
                                        </div>
                                        <div class="p-field p-col-12 p-md-2">
                                            <p:outputLabel value="Paralelo" for="@next"/>
                                            <p:selectOneMenu  id="SelectParalelo"
                                                              value="#{solicitudesMB.curso.idCurso}">

                                                <f:selectItem noSelectionOption="true" itemLabel="Seleccione Paralelo" 
                                                              itemValue="0"/>
                                                <f:selectItems value="#{solicitudesMB.listaCurso}" 
                                                               var="fa"
                                                               itemLabel="#{fa.nombreCurso}" 
                                                               itemValue="#{fa.idCurso}"></f:selectItems>

                                            </p:selectOneMenu>
                                        </div>
                                        <div class="p-field p-col-12 p-md-1">
                                            <p:outputLabel value="Nro. Practica" for="@next"/>
                                            <p:inputText 
                                                maxlength="25"></p:inputText>
                                        </div>
                                        <div class="p-field p-col-12 p-md-8">
                                            <p:outputLabel value="Tema de la Practica" for="@next"/>
                                            <p:inputText 
                                                maxlength="25"></p:inputText>
                                        </div>
                                        <div class="p-field p-col-12 p-md-1">
                                            <p:outputLabel value="Nro. Estudiantes" for="@next"/>
                                            <p:inputText 
                                                maxlength="25"></p:inputText>
                                        </div>
                                        <div class="p-field p-col-12 p-md-1">
                                            <p:outputLabel value="Fecha" for="@next"/>
                                            <p:datePicker id="button"

                                                          value="#{calendarView.date7}" 
                                                          showIcon="true"/>
                                        </div>
                                        <div class="p-field p-col-12 p-md-1">
                                            <p:outputLabel value="Hora" for="@next"/>
                                            <p:inputText 
                                                maxlength="25"></p:inputText>
                                        </div>
                                        <div class="p-field p-col-12 p-md-12">
                                            <p:outputLabel value="Objetivo de la practica" for="@next"/>
                                            <p:inputText 
                                                maxlength="25"></p:inputText>
                                        </div>
                                    </div>
                                </p:outputPanel>
                                <f:facet name="footer">
                                    <p:commandButton 
                                        value="Guardar" 
                                        icon="pi pi-check" 
                                        styleClass="ui-button-primary">
                                    </p:commandButton>
                                    <p:commandButton 
                                        value="Cancelar" 
                                        icon="pi pi-times"
                                        styleClass="ui-button-danger"/>
                                </f:facet>

                                <!-- EQUIPOS -->

                                <div class="card" style="margin-top: 5px;">
                                    <div class="p-grid p-justify-around">
                                        <div class="p-field p-col-12 p-md-12">
                                            <p:fieldset legend="EQUIPOS REQUERIDOS">
                                                <p:selectCheckboxMenu id="comboEquipos" value="#{solicitudesMB.listaEquipos}" label="Cities" style="min-width: 15rem"
                                                                      multiple="true" filter="true" filterMatchMode="startsWith" panelStyle="width: 30rem" scrollHeight="250">
                                                    <p:ajax event="itemUnselect" />
                                                    <f:selectItems value="#{equipoMB.listaEquipos}" 
                                                                   var="equipo" 
                                                                   itemLabel="#{equipo.categoriaEquipo.nombre} - #{equipo.descripcion}"/>                       
                                                </p:selectCheckboxMenu>
                                            </p:fieldset> 
                                        </div>
                                    </div>
                                </div>


                                <div class="card" style="margin-top: 5px;">
                                    <div class="p-grid p-justify-around">
                                        <p:dataTable lazy="true"  editable="true" reflow="true"
                                                     editInitEvent="dblclick" editMode="cell">
                                            <f:facet name="header">
                                                <div class="p-d-flex p-jc-between p-ai-center">
                                                    <span style="font-size: 20px">Lista de Estudiantes</span>
                                                    <span class="filter-container ui-input-icon-left">
                                                        <i class="pi pi-search"></i><p:inputText placeholder="Buscar"/>
                                                    </span>
                                                </div>
                                            </f:facet>
                                            <p:column headerText="Numero" filterStyle="display : none">
                                                <h:outputText  />
                                            </p:column>
                                            <p:column headerText="Nombres" filterStyle="display : none">
                                                <h:outputText  />
                                            </p:column>
                                            <p:column headerText="Apellidos" filterStyle="display : none">
                                                <h:outputText  />
                                            </p:column>
                                            <p:column headerText="Cedula" filterStyle="display : none">
                                                <h:outputText  />
                                            </p:column>
                                            <p:column headerText="Asistencia" filterStyle="display : none">
                                                <h:outputText  />
                                            </p:column>
                                        </p:dataTable>
                                    </div>
                                </div>
                                <div align="right" >
                                    <p:commandButton type="button" 
                                                     value="Guardar"
                                                     icon="pi pi-save" 
                                                     styleClass="ui-button-success" />
                                    <p:button  value="Cancelar" 
                                               styleClass="ui-button-danger"
                                               icon="pi pi-times" 
                                               outcome="ModuloSolicitudes"/>
                                </div>
                            </h:form>
                        </p:toolbarGroup> 
                    </div>
                </div>   
            </ui:define>
        </ui:composition>
    </h:body>
</html>
